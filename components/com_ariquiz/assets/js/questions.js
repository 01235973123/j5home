;!function(){YAHOO.namespace("ARISoft.ariQuiz");var t=YAHOO.util.Dom,e=YAHOO.util.Event,i=YAHOO.util.Lang,s=YAHOO.util.Connect,n=YAHOO.ARISoft,a=YAHOO.ARISoft.ariQuiz,r=YAHOO.ARISoft.Quiz,o=YAHOO.ARISoft.languageManager;a.questions={baseQuestion:function(t,e,i){this.questionId=t,this.questionData=e,this.extraParams=i}},a.questions.baseQuestion.prototype={_readOnly:!1,draw:function(t,e){},validate:function(t){return!0},setReadOnly:function(t){this._readOnly=t},extractQuestionData:function(t){return t}},a.ajaxQuestionManager=function(t){t=t||{},t=i.merge({baseUrl:"index.php",nextPageTask:"ajaxNextPage",prevPageTask:"ajaxPrevPage",getPageTask:"ajaxGetPage",savePageTask:"ajaxSavePage",getExplanationTask:"ajaxGetExplanation",stopQuizTask:"ajaxStopQuiz",resumeQuizTask:"ajaxResumeQuiz",getCorrectAnswerTask:"ajaxGetCorrectAnswer",goToPageTask:"ajaxGoToPage",option:"com_ariquiz",view:"question",ticketId:null,quizId:null,parsePluginTag:!0},t),i.augmentObject(this,t,!0)},a.ajaxQuestionManager.prototype={questionId:null,getPage:function(t){var e=this.toQueryString({option:this.option,view:this.view,ticketId:this.ticketId,quizId:this.quizId,task:this.getPageTask,parseTag:this.parsePluginTag?"1":"0"});s.asyncRequest("POST",this.baseUrl,t,e)},savePage:function(t,e){var i={option:this.option,view:this.view,ticketId:this.ticketId,quizId:this.quizId,task:this.savePageTask};this.updateForm(t,i),i=this.toQueryString(i),s.setForm(t),s.asyncRequest("POST",this.baseUrl,e,i)},nextPage:function(t,e){var i={option:this.option,view:this.view,ticketId:this.ticketId,quizId:this.quizId,task:this.nextPageTask};this.updateForm(t,i),i=this.toQueryString(i),s.setForm(t),s.asyncRequest("POST",this.baseUrl,e,i)},prevPage:function(t,e){var i={option:this.option,view:this.view,ticketId:this.ticketId,quizId:this.quizId,task:this.prevPageTask};this.updateForm(t,i),i=this.toQueryString(i),s.setForm(t),s.asyncRequest("POST",this.baseUrl,e,i)},goToPage:function(t,e,i){var n={option:this.option,view:this.view,ticketId:this.ticketId,quizId:this.quizId,task:this.goToPageTask,pageNum:t};this.updateForm(e,n),n=this.toQueryString(n),s.setForm(e),s.asyncRequest("POST",this.baseUrl,i,n)},stopQuiz:function(t){var e=this.toQueryString({option:this.option,view:this.view,quizId:this.quizId,ticketId:this.ticketId,task:this.stopQuizTask});s.asyncRequest("POST",this.baseUrl,t,e)},resumeQuiz:function(t){var e=this.toQueryString({option:this.option,view:this.view,ticketId:this.ticketId,quizId:this.quizId,task:this.resumeQuizTask});s.asyncRequest("POST",this.baseUrl,t,e)},getExplanation:function(t,e){var i=this.toQueryString({option:this.option,view:this.view,ticketId:this.ticketId,quizId:this.quizId,task:this.getExplanationTask,pageId:t});s.asyncRequest("POST",this.baseUrl,e,i)},getCorrectAnswer:function(t,e,i){var n={option:this.option,view:this.view,ticketId:this.ticketId,quizId:this.quizId,task:this.getCorrectAnswerTask,qid:t};this.updateForm(e,n),n=this.toQueryString(n),s.setForm(e),s.asyncRequest("POST",this.baseUrl,i,n)},updateForm:function(t,e){if(t&&t.elements&&e)for(var s in e)i.isUndefined(t.elements[s])||i.isUndefined(t.elements[s].value)||(t.elements[s].value=e[s])},toQueryString:function(t){var e="";if(!t)return e;var i=[];for(var s in t){var n=t[s];i.push(s+"="+encodeURIComponent(n))}return e=i.join("&")}},a.questionManager=function(t,e){this.ajaxManager=new a.ajaxQuestionManager(e),t=YAHOO.lang.merge({mainContainerId:null,containerId:null,explanationId:null,correctAnswerId:null,errorContainerId:null,formId:null,completedCount:0,quizProgressWrapCtrlId:"ariQuizProgressWrap",quizProgressCtrlId:"ariQuizProgress",quizTime:null,timeOverCtrlId:"timeOver",pageIdCtrlId:"hidPageId",pageDescriptionCtrlId:"aqPageDescription",pageDescriptionContentCtrlId:"aqPageDescriptionContent",questionCount:0,pageCount:0,autoScroll:!0,extraParams:null,MESSAGES:{loading:""},TEMPLATES:{CORRECT_ANSWER:YAHOO.ARISoft.Quiz.Templates.CORRECT_ANSWER,EXPLANATION:YAHOO.ARISoft.Quiz.Templates.EXPLANATION},SCROLL_TIMEOUT:300},t||{}),i.augmentObject(this,t,!0),this.timeParts=[3600,60,1]},a.questionManager.prototype={loadingCount:0,currentPage:null,init:function(){this.startQuizTime=(new Date).getTime(),this.showCurrentPage()},getMessage:function(t){var e="";return i.isUndefined(this.MESSAGES[t])||(e=this.MESSAGES[t]),e},showError:function(e){t.get(this.errorContainerId).innerHTML=e,YAHOO.ARISoft.page.panelError.show()},hideError:function(){YAHOO.ARISoft.page.panelError.hide()},raiseServerEvent:function(e){if(!this.formId)return!1;var s=t.get(this.formId);return!(!s||i.isUndefined(s.elements.task))&&(s.elements.task.value=e,this._showLoading(),s.submit(),!0)},setCurrentPage:function(e){this.currentPage=e,t.get(this.pageIdCtrlId).value=e?e.pageId:"",this.paging_setActivePage(e.pageNumber)},getPageQuestion:function(t){var e=null,i=this.currentPage;if(!i)return e;for(var s=0;s<i.questions.length;s++){var n=i.questions[s];if(n.questionId==t){e=n.jQuestion;break}}return e},prepareQuestionsForSubmit:function(){this.enableQuestions()},enableQuestions:function(){var t=this.currentPage;if(!t)return null;for(var e=0;e<t.questions.length;e++){var i=t.questions[e];i.completed||(i.jQuestion.setReadOnly(!1),this.hideCorrectAnswer(i.questionId))}},resumeQuiz:function(){this._showLoading(),this.ajaxManager.resumeQuiz({success:function(t){var e=t.responseText;i.JSON.parse(e)?(this.showCurrentPage(),this._hideLoading()):this._reload()},failure:this._onAjaxFailure,scope:this})},stopQuiz:function(t){this._clearTimer(),this.hideError(),t=t||this.showCurrentPage,this._showLoading(),this.ajaxManager.stopQuiz({success:function(t){var e=t.responseText;i.JSON.parse(e)?(t.argument.callback&&t.argument.callback.call(this),this._hideLoading()):this._reload()},failure:this._onAjaxFailure,scope:this,argument:{callback:t}})},nextPage:function(){this.prepareQuestionsForSubmit(),this._clearTimer(),this.hideError(),this._showLoading(),this.ajaxManager.nextPage(t.get(this.formId),{success:function(t){var e=t.responseText;i.JSON.parse(e)?(this.showCurrentPage(),this._hideLoading()):this._reload()},failure:this._onAjaxFailure,scope:this})},prevPage:function(){this.prepareQuestionsForSubmit(),this._clearTimer(),this.hideError(),this._showLoading(),this.ajaxManager.prevPage(t.get(this.formId),{success:function(t){var e=t.responseText;i.JSON.parse(e)?(this.showCurrentPage(),this._hideLoading()):this._reload()},failure:this._onAjaxFailure,scope:this})},goToPage:function(e){this.prepareQuestionsForSubmit(),this._clearTimer(),this.hideError(),this._showLoading(),this.ajaxManager.goToPage(e,t.get(this.formId),{success:function(t){var e=t.responseText;i.JSON.parse(e)?(this.showCurrentPage(),this._hideLoading()):this._reload()},failure:this._onAjaxFailure,scope:this})},savePage:function(e){if(!(e=e||!1)&&this._isTimeOver())return!1;this.prepareQuestionsForSubmit(),this._clearTimer(),this.hideError(),this._showLoading(),this.ajaxManager.savePage(t.get(this.formId),{success:function(t){var e=t.responseText,s=i.JSON.parse(e);if(s&&s.result){var n=0;s.tryAgain&&(this.showError(o.getMessage("COM_ARIQUIZ_CHOOSEINCORRECTANSWER")),s.questionId&&(n=s.questionId)),s.moveToNext&&(++this.completedCount,this.paging_disablePage(this.currentPage.pageNumber)),s.showExplanation?this.showExplanationQuestion():this.showCurrentPage(n),this._hideLoading()}else this._reload()},failure:this._onAjaxFailure,scope:this})},showCorrectAnswer:function(e){this._showLoadingForElement("question"+e),this.ajaxManager.getCorrectAnswer(e,t.get(this.formId),{success:function(s){var n=s.responseText,a=i.JSON.parse(n),r="correctAnswer"+e;if(!a||!t.get(r))return this._hideLoading(),void this.hideCorrectAnswer(e);this._showCorrectAnswer(e,r,a),this._hideLoadingForElement("question"+e)},failure:this._onAjaxFailure,scope:this})},_showCorrectAnswer:function(e,i,s){t.get(i).innerHTML=n.core.format(this.TEMPLATES.CORRECT_ANSWER,{details:r.statistics.getStatistics(s,!0,!0,this.extraParams),resultMessage:s.IsCorrect?o.getMessage("COM_ARIQUIZ_RESULT_CORRECTANSWER"):o.getMessage("COM_ARIQUIZ_RESULT_INCORRECTANSWER"),resultClass:s.IsCorrect?"aq-answer-correct":"aq-answer-incorrect",explanation:s.Note?n.core.format(this.TEMPLATES.EXPLANATION,{explanation:s.Note}):""});var a=this.getPageQuestion(e);a&&a.setReadOnly(!0),this.autoScroll&&YAHOO.ARISoft.page.scrollToElement("question"+e,this.SCROLL_TIMEOUT),t.addClass("question"+e,"aq-show-answer")},hideCorrectAnswer:function(e){t.removeClass("question"+e,"aq-show-answer");var i=this.getPageQuestion(e);i&&i.setReadOnly(!1)},showCurrentPage:function(t){this._showLoading(),this.ajaxManager.getPage({success:function(t){var e=this.self,s=t.responseText,n=i.JSON.parse(s);if(n){if(n)for(var r=0;r<n.questions.length;r++){var o=n.questions[r],l=o.questionType;!i.isUndefined(a.questions[l])?(o.jQuestion=a.questions[l],o.jQuestion=new o.jQuestion(o.questionId,o.questionData,e.extraParams),e.ajaxManager.pageId=n.pageId):n.questions[r]=null}e.setCurrentPage(n),e._drawPageQuestions(n,this.goToQuestionId)&&e._hideLoading()}else e._reload()},failure:this._onAjaxFailure,scope:{self:this,goToQuestionId:t}})},showExplanationQuestion:function(t){if(!t){var e=this.currentPage;e&&(t=e.pageId)}this._showLoading(),this.ajaxManager.getExplanation(t,{success:function(t){var e=t.responseText,s=i.JSON.parse(e);if(!s)return this._hideLoading(),void this.showCurrentPage();this._showExplanationQuestion(s),this._hideLoading()},failure:this._onAjaxFailure,scope:this})},_showExplanationQuestion:function(e){for(var i=0;i<this.currentPage.questions.length;i++){var s=this.currentPage.questions[i],a=s.questionId;if(s.jQuestion.setReadOnly(!0),void 0!==e[a]){var l=e[a],u="explanation"+a;s.jQuestion.questionData=s.jQuestion.extractQuestionData(l.ClientData),s.jQuestion.draw("ariQueContainer_"+a,!0,{questionText:""}),l.HasCorrectAnswer?t.get(u).innerHTML=n.core.format(this.TEMPLATES.CORRECT_ANSWER,{details:r.statistics.getStatistics(l),resultMessage:l.IsCorrect?o.getMessage("COM_ARIQUIZ_RESULT_CORRECTANSWER"):o.getMessage("COM_ARIQUIZ_RESULT_INCORRECTANSWER"),resultClass:l.IsCorrect?"aq-answer-correct":"aq-answer-incorrect",explanation:l.Note?n.core.format(this.TEMPLATES.EXPLANATION,{explanation:l.Note}):""}):t.setStyle(u,"display","none")}}t.addClass(this.mainContainerId,"aq-show-explanation"),this.currentPage.pageTime=null,this._startTimer()},hideExplanationQuestion:function(e){e=e||!1,t.removeClass(this.mainContainerId,"aq-show-explanation"),e||this.showCurrentPage()},paging_setActivePage:function(e){t.getElementsByClassName("aq-navbutton-panel",null,this.mainContainerId,(function(i){t.getElementsByClassName("active","LI",i,(function(e){t.removeClass(e,"active")})),t.getElementsByClassName("aq-navbutton-page"+e,"LI",i,(function(e){t.addClass(e,"active")}))}))},paging_disablePage:function(e){t.getElementsByClassName("aq-navbutton-panel",null,this.mainContainerId,(function(i){t.getElementsByClassName("aq-navbutton-page"+e,"LI",i,(function(e){t.removeClass(e,"active"),t.addClass(e,"disabled")}))}))},paging_removeActivePage:function(){t.getElementsByClassName("aq-navbutton-panel",null,this.mainContainerId,(function(e){t.getElementsByClassName("active","LI",e,(function(e){t.removeClass(e,"active")}))}))},validate:function(){var t=!0;if(this.currentPage){for(var e=null,i=!parseInt(this.extraParams.DisableEmptyAnswer,10),s=0;s<this.currentPage.questions.length;s++){var n=this.currentPage.questions[s],a=n.jQuestion.validate(!1);if(!1===a){this.autoScroll&&YAHOO.ARISoft.page.scrollToElement("question"+n.questionId,this.SCROLL_TIMEOUT),t=!1;break}null===a&&(t=null,e||(e=n.questionId))}null===t&&(i?t=confirm(o.getMessage("COM_ARIQUIZ_QUESTIONNOTSELECTED")):(t=!1,this.showError(o.getMessage("COM_ARIQUIZ_QUESTIONNOTSELECTEDWARNING"))),t||this.autoScroll&&YAHOO.ARISoft.page.scrollToElement("question"+e,this.SCROLL_TIMEOUT))}return t},_onAjaxFailure:function(){alert(o.getMessage("COM_ARIQUIZ_SERVERERROR")),this._hideLoading()},_showLoading:function(){t.addClass(this.mainContainerId,"aq-loading"),this.loadingCount<1&&this.setEnabledButtons(!1),++this.loadingCount},_hideLoading:function(){--this.loadingCount,this.loadingCount>0||(this.loadingCount=0,t.removeClass(this.mainContainerId,"aq-loading"),this.setEnabledButtons(!0))},_showLoadingForElement:function(e){t.addClass(e,"aq-loading"),this.setEnabledButtons(!1)},_hideLoadingForElement:function(e){t.removeClass(e,"aq-loading"),0==this.loadingCount&&this.setEnabledButtons(!0)},_reload:function(){this.raiseServerEvent("reload")||(window.location.href=window.location.href)},_getProgressPercent:function(){var t=this.pageCount,e=0;return t&&(e=this.completedCount<t?Math.floor(100*this.completedCount/t):100),e},_updateQuizProgress:function(){t.setStyle(this.quizProgressCtrlId,"width",this._getProgressPercent()+"%"),t.setAttribute(this.quizProgressWrapCtrlId,"title",n.core.format("#{cCount} / #{qCount}",{cCount:this.completedCount,qCount:this.pageCount}));var e=t.get(this.questionInfoId);e&&(e.innerHTML=n.core.format(o.getMessage("COM_ARIQUIZ_JSQUESTIONINFO"),{qIndex:this.currentPage?parseInt(this.currentPage.pageNumber,10)+1:0,qCount:this.pageCount}))},_startTimer:function(){this._clearTimer();var e=t.get(this.timeOverCtrlId);e&&(e.value="0"),this.questionTime=this.currentPage?this.currentPage.pageTime:null,this.startQueTime=(new Date).getTime(),null==this.questionTime&&null==this.quizTime||(null!=this.quizTime&&t.addClass(this.mainContainerId,"aq-quiztimer-visible"),null!=this.questionTime&&t.addClass(this.mainContainerId,"aq-questiontimer-visible"),this._updateTimer(),this._updateTimerHandler=i.later(999,this,this._updateTimer,null,!0))},_clearTimer:function(){t.removeClass(this.mainContainerId,"aq-quiztimer-visible"),t.removeClass(this.mainContainerId,"aq-questiontimer-visible"),t.getElementsByClassName("aq-time",null,this.timeContainerId,(function(t){t.innerHTML="00"})),t.getElementsByClassName("aq-time-limit",null,this.timeContainerId,(function(e){t.removeClass(e,"aq-time-limit")})),this._updateTimerHandler&&(this._updateTimerHandler.cancel(),this._updateTimerHandler=null)},_updateTimer:function(){var e=(new Date).getTime();if(null!=this.questionTime&&(this.questionTime-=Math.round((e-this.startQueTime)/1e3)),null!=this.quizTime&&(this.quizTime-=Math.round((e-this.startQuizTime)/1e3)),this.startQuizTime=this.startQueTime=e,null!=this.questionTime){var i=this.questionTime>0?this.questionTime:0,s=this._parseQuizTime(i);t.get("ariQuestionTimerHr").innerHTML=s[3600],t.get("ariQuestionTimerMin").innerHTML=s[60],t.get("ariQuestionTimerSec").innerHTML=s[1],this.questionTime<31&&t.addClass("ariQuestionTimer","aq-time-limit")}if(null!=this.quizTime){i=this.quizTime>0?this.quizTime:0,s=this._parseQuizTime(i);t.get("ariQuizTimerHr").innerHTML=s[3600],t.get("ariQuizTimerMin").innerHTML=s[60],t.get("ariQuizTimerSec").innerHTML=s[1],this.quizTime<31&&t.addClass("ariQuizTimer","aq-time-limit")}if(null!=this.questionTime&&this.questionTime<=0||null!=this.quizTime&&this.quizTime<=0){this.questionTime=0,this._updateTimerHandler&&this._updateTimerHandler.cancel();var n=t.get(this.timeOverCtrlId);return n&&(n.value="1"),void this.savePage(!0)}},_isTimeOver:function(){return null!=this.questionTime&&this.questionTime<=0||null!=this.quizTime&&this.quizTime<=0},_parseQuizTime:function(t){for(var e={},i=0,s=this.timeParts.length;i<s;i++){var n=this.timeParts[i],a=Math.floor(t/n);a>0&&(t-=a*n),e[n]=1==(""+a).length?"0"+a:a}return e},_drawPageQuestions:function(i,s){if(!i||!i.questions)return this._reload(),!1;s=s||0,i.description?t.removeClass(this.pageDescriptionCtrlId,"aq-page-description-hidden"):t.addClass(this.pageDescriptionCtrlId,"aq-page-description-hidden"),t.get(this.pageDescriptionContentCtrlId).innerHTML=i.description,t.get(this.containerId).innerHTML="";for(var a=n.core.format('<a href="#" class="btn btn-small disable-onsubmit aq-btn-hide-answer" onclick="return false;">#{returnToQuestionMessage} <i class="icon-circle-arrow-right"></i></a>\t\t\t\t<a href="#" class="btn btn-small disable-onsubmit aq-btn-correct-answer" onclick="return false;"><i class="icon-check"></i> #{btnCorrectAnswer}</a>',{returnToQuestionMessage:o.getMessage("COM_ARIQUIZ_RETURNTOQUESTION"),btnCorrectAnswer:o.getMessage("COM_ARIQUIZ_SHOWCORRECTANSWER")}),r=0;r<i.questions.length;r++){var l=i.questions[r],u=l.questionId;t.get(this.containerId).innerHTML+=n.core.format('<div class="aq-question-panel#{completedClass}" id="question#{questionId}">\t\t\t\t\t\t\t<div class="aq-loading-message">\t\t\t\t\t\t\t\t<div class="ari-loading">#{loadingMessage}</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="aq-question-panel-content aq-hidden-onloading">\t\t\t\t\t\t\t\t<div class="aq-completed-message">#{completedMessage}</div>\t\t\t\t\t\t\t\t<div class="aq-review-message">#{reviewMessage}</div>\t\t\t\t\t\t\t\t<div class="aq-explanation-message">#{explanationMessage}</div>\t\t\t\t\t\t\t\t<div class="aq-question">\t\t\t\t\t\t\t\t\t<div class="aq-question-title">#{questionMessage}<span class="aq-question-index">#{questionIndex}</span></div>\t\t\t\t\t\t\t\t\t<div class="aq-question-content" id="ariQueMainContainer_#{questionId}"></div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<br class="clear" />\t\t\t\t\t\t\t\t<div id="ariQueContainer_#{questionId}" class="aq-question-answers"></div>\t\t\t\t\t\t\t\t<div id="correctAnswer#{questionId}" class="aq-question-correct-answer"></div>\t\t\t\t\t\t\t\t<div id="explanation#{questionId}" class="aq-question-explanation"></div>\t\t\t\t\t\t\t\t<div class="aq-question-buttons">\t\t\t\t\t\t\t\t\t#{correctAnswerButtons}\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>',{questionId:u,loadingMessage:this.getMessage("loading"),completedMessage:o.getMessage("COM_ARIQUIZ_COMPLETED"),reviewMessage:o.getMessage("COM_ARIQUIZ_REVIEW"),explanationMessage:o.getMessage("COM_ARIQUIZ_EXPLANATION"),questionMessage:o.getMessage("COM_ARIQUIZ_QUESTION"),questionIndex:1+parseInt(l.questionIndex,10),completedClass:l.completed?" aq-question-completed":"",correctAnswerButtons:this.showCorrectAnswerBtn&&l.hasCorrectAnswer?a:""}),l.jQuestion.draw("ariQueContainer_"+u,l.completed,l),e.onAvailable("question"+u,(function(){var i=this.questionId;n.DOM.updateHtml("ariQueMainContainer_"+i,this.question.questionText),t.getElementsByClassName("aq-btn-correct-answer",null,"question"+i,(function(s){e.on(s,"click",(function(){return t.hasClass(s,"disabled")||this.showCorrectAnswer(i),!1}),this,!0)}),this.self,!0),t.getElementsByClassName("aq-btn-hide-answer",null,"question"+i,(function(s){e.on(s,"click",(function(){return t.hasClass(s,"disabled")||this.hideCorrectAnswer(i),!1}),this,!0)}),this.self,!0)}),{questionId:u,question:l,self:this},!0)}return this._startTimer(),this._updateQuizProgress(),this.autoScroll&&(s?YAHOO.ARISoft.page.scrollToElement("question"+s,this.SCROLL_TIMEOUT):YAHOO.ARISoft.page.scrollToElement("aqTop",this.SCROLL_TIMEOUT)),!0},getQuestionText:function(){return t.get(this.queContainerId).innerHTML},setQuestionText:function(t){n.DOM.updateHtml(this.queContainerId,t)},setEnabledButtons:function(e){var i=document.forms[this.formId];t.getElementsByClassName("disable-onsubmit",null,i,(function(i){void 0!==i.disabled&&(i.disabled=!e),e?t.removeClass(i,"disabled"):t.addClass(i,"disabled")}))}},a.questions.SingleQuestion=n.core.createDerivedClass(a.questions.baseQuestion,{ViewTypes:{Radio:0,DropDown:1},view:null,answersOrderType:"Numeric",constructor:function(t,e,i){this.view=this.ViewTypes.Radio;var s=null;e&&(e.data&&(s=e.data),e.view&&(this.view=parseInt(e.view,10))),i&&i.AnswersOrderType&&(this.answersOrderType=i.AnswersOrderType),this.constructor(t,s,i)},extractQuestionData:function(t){return t&&t.data?t.data:null},getId:function(){return"selectedAnswer_"+this.questionId},getContainerId:function(){return"tblQueContainer_"+this.questionId},draw:function(e,i){var s="";if(this.view===this.ViewTypes.DropDown)s=this.getDropDownViewHtml(i);else s=this.getRadioViewHtml(i);t.get(e).innerHTML=s},getRadioViewHtml:function(t){var e=this.getId(),i="";if(this.questionData)for(var s=0,r=this.questionData.length;s<r;s++){var l=this.questionData[s],u=l.selected||!1;i+=n.core.format('<div class="aq-answer-container">\t\t\t\t\t<div class="aq-answer-label"><label for="sa#{questionId}_#{hidQueId}">#{choice} #{num}</label> <input type="radio" class="aq-singlequestion-ctrl" id="sa#{questionId}_#{hidQueId}" name="#{ctrlId}" value="#{hidQueId}" #{checked} #{readonly} /></div>\t\t\t\t\t<div class="aq-answer">#{answer}</div>\t\t\t\t\t<br class="aq-clear" />\t\t\t\t</div>',{hidQueId:l.hidQueId,ctrlId:e,questionId:this.questionId,answer:YAHOO.ARISoft.util.fixImageUrl(l.tbxAnswer),choice:o.getMessage("COM_ARIQUIZ_CHOICE"),num:a.questions.util.getAnswerNumber(s+1,this.answersOrderType),checked:u?' checked="checked"':"",readonly:t?' disabled="disabled"':""})}return n.core.format('<div id="#{containerId}" class="aq-singlequestion">#{answers}<br class="aq-clear" /></div>',{containerId:this.getContainerId(),answers:i})},getDropDownViewHtml:function(t){var e=this.getId(),i='<select class="aq-singlequestion-ctrl" id="'+e+'" name="'+e+'"'+(t?' disabled="disabled"':"")+'><option value="">'+YAHOO.ARISoft.languageManager.getMessage("COM_ARIQUIZ_SELECTANSWER")+"</option>";if(this.questionData)for(var s=0,a=this.questionData.length;s<a;s++){var r=this.questionData[s],o=r.selected||!1;i+=n.core.format('<option value="#{id}"#{selected}>#{answer}</option>',{id:r.hidQueId,answer:r.tbxAnswer,selected:o?' selected="selected"':""})}return i+="</select>"},validate:function(t){t=t||!1;var e=!0;if(this.view===this.ViewTypes.DropDown)e=this.validateDropDown();else e=this.validateRadio();return e||t||(e=null),e},validateRadio:function(){var t=!0,e=n.DOM.getChildElementsByAttribute(this.getContainerId(),"name",this.getId());if(e&&e.length>0){t=!1;for(var i=0;i<e.length;i++)if(e[i].checked){t=!0;break}}return t},validateDropDown:function(){var t=document.getElementById(this.getId());return t&&t.value},setReadOnly:function(e){this._readOnly=e,t.getElementsByClassName("aq-singlequestion-ctrl",null,this.getContainerId(),(function(t){t.disabled=e}))}}),a.questions.MultipleQuestion=n.core.createDerivedClass(a.questions.baseQuestion,{answersOrderType:"Numeric",constructor:function(t,e,i){i&&i.AnswersOrderType&&(this.answersOrderType=i.AnswersOrderType),this.constructor(t,e,i)},getId:function(){return"selectedAnswer_"+this.questionId},getContainerId:function(){return"tblQueContainer_"+this.questionId},draw:function(e,i){var s=this.getId(),r="";if(this.questionData)for(var l=0,u=this.questionData.length;l<u;l++){var d=this.questionData[l],h=d.selected||!1;r+=n.core.format('<div class="aq-answer-container">\t\t\t\t\t\t<div class="aq-answer-label"><label for="sa#{questionId}_#{hidQueId}">#{choice} #{num}</label> <input type="checkbox" class="aq-multiplequestion-ctrl" id="sa#{questionId}_#{hidQueId}" name="#{ctrlId}[]" value="#{hidQueId}"#{checked}#{readonly} /></div>\t\t\t\t\t\t<div class="aq-answer">#{answer}</div>\t\t\t\t\t\t<br class="aq-clear" />\t\t\t\t\t</div>',{hidQueId:d.hidQueId,ctrlId:s,questionId:this.questionId,answer:d.tbxAnswer,choice:o.getMessage("COM_ARIQUIZ_CHOICE"),num:a.questions.util.getAnswerNumber(l+1,this.answersOrderType),checked:h?' checked="checked"':"",readonly:i?' disabled="disabled"':""})}t.get(e).innerHTML=n.core.format('<div id="#{containerId}" class="aq-multiplequestion">#{answers}<br class="aq-clear" /></div>',{containerId:this.getContainerId(),answers:r})},validate:function(t){t=t||!1;var e=!0,i=n.DOM.getChildElementsByAttribute(this.getContainerId(),"name",this.getId()+"[]");if(i&&i.length>0){e=!1;for(var s=0;s<i.length;s++)if(i[s].checked){e=!0;break}}return e||t||(e=null),e},setReadOnly:function(e){this._readOnly=e,t.getElementsByClassName("aq-multiplequestion-ctrl",null,this.getContainerId(),(function(t){t.disabled=e}))}}),a.questions.MultipleSummingQuestion=n.core.createDerivedClass(a.questions.baseQuestion,{answersOrderType:"Numeric",constructor:function(t,e,i){i&&i.AnswersOrderType&&(this.answersOrderType=i.AnswersOrderType),this.constructor(t,e,i)},getId:function(){return"selectedAnswer_"+this.questionId},getContainerId:function(){return"tblQueContainer_"+this.questionId},draw:function(e,i){var s=this.getId(),r="";if(this.questionData)for(var l=0,u=this.questionData.length;l<u;l++){var d=this.questionData[l],h=d.selected||!1;r+=n.core.format('<div class="aq-answer-container">\t\t\t\t\t\t<div class="aq-answer-label"><label for="sa#{questionId}_#{hidQueId}">#{choice} #{num}</label> <input type="checkbox" class="aq-multiplesummingquestion-ctrl" id="sa#{questionId}_#{hidQueId}" name="#{ctrlId}[]" value="#{hidQueId}"#{checked}#{readonly} /></div>\t\t\t\t\t\t<div class="aq-answer">#{answer}</div>\t\t\t\t\t\t<br class="aq-clear" />\t\t\t\t\t</div>',{hidQueId:d.hidQueId,ctrlId:s,questionId:this.questionId,answer:d.tbxAnswer,choice:o.getMessage("COM_ARIQUIZ_CHOICE"),num:a.questions.util.getAnswerNumber(l+1,this.answersOrderType),checked:h?' checked="checked"':"",readonly:i?' disabled="disabled"':""})}t.get(e).innerHTML=n.core.format('<div id="#{containerId}" class="aq-multiplesumquestion">#{answers}<br class="aq-clear" /></div>',{containerId:this.getContainerId(),answers:r})},validate:function(t){t=t||!1;var e=!0,i=n.DOM.getChildElementsByAttribute(this.getContainerId(),"name",this.getId()+"[]");if(i&&i.length>0){e=!1;for(var s=0;s<i.length;s++)if(i[s].checked){e=!0;break}}return e||t||(e=null),e},setReadOnly:function(e){this._readOnly=e,t.getElementsByClassName("aq-multiplesummingquestion-ctrl",null,this.getContainerId(),(function(t){t.disabled=e}))}}),a.questions.FreeTextQuestion=n.core.createDerivedClass(YAHOO.ARISoft.ariQuiz.questions.baseQuestion,{getContainerId:function(){return"questionContainer_"+this.questionId},getId:function(){return"tbxAnswer_"+this.questionId},draw:function(i,s){var a=t.get(i),r=this.getId(),l=this.questionData?this.questionData.answer:"";a.innerHTML='<div id="'+this.getContainerId()+'" class="aq-freetextquestion"><input type="text" id="'+r+'" name="'+r+'" class="ariQuizFreeText aq-freetextquestion-ctrl" autocomplete="off"'+(s?' disabled="disabled"':"")+" /></div>",l&&e.onAvailable(r,(function(){this.value=l})),s||new n.widgets.watermarkText(r,{watermarkText:o.getMessage("COM_ARIQUIZ_WATERMARKTEXT"),cssClass:"ariQuizWatermark"})},validate:function(e){e=e||!1;var i=t.get(this.getId()).value,s=!!(i=i.replace(/^\s+|\s+$/g,""));return s||e||(s=null),s},setReadOnly:function(e){this._readOnly=e,t.getElementsByClassName("aq-freetextquestion-ctrl",null,this.getContainerId(),(function(t){t.disabled=e}))}}),a.questions.HotSpotQuestion=n.core.createDerivedClass(a.questions.baseQuestion,{getImgId:function(){return"imgAriHotSpot_"+this.questionId},getMarkerId:function(){return"imgAriHotSpotMarker"+this.questionId},getXId:function(){return"hidAriHotSpotX_"+this.questionId},getYId:function(){return"hidAriHotSpotY_"+this.questionId},getContainerId:function(){return"divAriHotSpotWrap_"+this.questionId},draw:function(i,s){var a=n.core.format(this.extraParams.ShowFileUrl,{questionId:this.questionId,alias:"hotspot_image"}),r=t.get(i),o=this.getXId(),l=this.getYId(),u=this.getImgId(),d=this.getMarkerId(),h=n.core.format('<div class="aq-hotspotquestion">\t\t\t\t\t\t<div id="#{containerId}" class="aq-hotspot-wrap">\t\t\t\t\t\t\t<img id="#{imgId}" class="aq-hotspot-img" src="#{imgLink}" />\t\t\t\t\t\t\t<div id="#{markerId}" class="aq-hotspot-marker">\t\t\t\t\t\t\t\t<div class="aq-hotspot-marker-img"></div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<input type="hidden" id="#{hidXId}" name="#{hidXId}" value="-1" />\t\t\t\t\t\t<input type="hidden" id="#{hidYId}" name="#{hidYId}" value="-1" />\t\t\t\t\t</div>',{imgLink:a,hidXId:o,hidYId:l,imgId:u,markerId:d,containerId:this.getContainerId()});if(r.innerHTML=h,this.questionData){var c=void 0!==this.questionData.x?parseInt(this.questionData.x,10):-1,g=void 0!==this.questionData.y?parseInt(this.questionData.y,10):-1;if(c>-1&&g>-1){var I=t.get(d);t.setStyle(I,"top",g+"px"),t.setStyle(I,"left",c+"px"),t.setStyle(I,"display","block"),t.get(o).value=c,t.get(l).value=g}}s||e.onAvailable(u,(function(){e.on(u,"mousedown",this._mouseDownHandler,this,!0)}),this,!0)},_mouseDownHandler:function(e){if(this._readOnly)return!1;var i=t.get(this.getMarkerId()),s=this._getCursorPosition(e,this.getContainerId());t.setStyle(i,"top",s.y+"px"),t.setStyle(i,"left",s.x+"px"),t.setStyle(i,"display","block");var n=this.getXId(),a=this.getYId();t.get(n).value=s.x,t.get(a).value=s.y},_getCursorPosition:function(s,n){if(n=t.get(n),!i.isUndefined(s.offsetX))return{x:s.offsetX,y:s.offsetY};var a=t.getXY(n);if(!YAHOO.env.ua.opera)for(;"BODY"!=n.tagName;)a[1]-=n.scrollTop||0,a[0]-=n.scrollLeft||0,n=n.parentNode;s=s||event;var r=e.getXY(s);return{x:r[0]-a[0],y:r[1]-a[1]}},validate:function(e){e=e||!1;var i=this.getXId(),s=t.get(i),n=s&&"-1"!=s.value;return n||e||(n=null),n}}),a.questions.CorrelationQuestion=n.core.createDerivedClass(a.questions.baseQuestion,{getId:function(){return"ddlVariant_"+this.questionId},getContainerId:function(){return"tblQueContainer_"+this.questionId},draw:function(i,s){var a=this.getId();if(answers="",containerTemplate='<table id="#{containerId}" class="aq-correlation">#{answers}</table>',itemTemplate='<tr>\t\t\t\t\t\t<td class="aq-correlation-label">#{tbxAnswer}</td>\t\t\t\t\t\t<td><select class="aq-correlation-ddl" id="#{ddlId}" name="#{ctrlId}[#{lblId}]"#{readonly}>#{options}</select></td>\t\t\t\t\t</tr>',this.questionData){for(var r='<option value="">'+o.getMessage("COM_ARIQUIZ_SELECTANSWER")+"</option>",l=this.questionData.answers.length,u=0;u<l;u++){var d=this.questionData.answers[u];r+=n.core.format('<option value="#{id}">#{answer}</option>',{id:d.id,answer:d.answer})}l=this.questionData.labels.length;for(u=0;u<l;u++){var h=a+(d=this.questionData.labels[u]).id.replace(/\./g,"");answers+=n.core.format(itemTemplate,{ddlId:h,lblId:d.id,tbxAnswer:d.label,options:r,ctrlId:a,readonly:s?' disabled="disabled"':""})}}if(t.get(i).innerHTML=n.core.format(containerTemplate,{containerId:this.getContainerId(),answers:answers}),this.questionData&&this.questionData.correlations){var c=this.questionData.correlations;for(var g in c){var I=c[g];if(I){h=a+g.replace(/\./g,"");e.onAvailable(h,(function(){t.get(this.id).value=this.ansId}),{id:h,ansId:I},!0)}}}},validate:function(e){e=e||!1;var i=!0,s=t.getElementsByClassName("aq-correlation-ddl",null,this.getContainerId());if(s)for(var n=s.length,a=[],r=0;r<n;r++){var o=s[r].value;if(!o||a.indexOf(o)>-1){i=!e&&null;break}a.push(o)}return i},setReadOnly:function(e){this._readOnly=e,t.getElementsByClassName("aq-correlation-ddl",null,this.getContainerId(),(function(t){t.disabled=e}))}}),a.questions.CorrelationDDQuestion=n.core.createDerivedClass(a.questions.baseQuestion,{HANDLER_CLASS:"aq-ddcorrelation-dd-element",TARGET_CLASS:"aq-ddcorrelation-target",HANDLER_TARGET_CLASS:"aq-ddcorrelation-label-answerholder",PH_TARGET_CLASS:"aq-ddcorrelation-answerholder",DD_GROUP:"corQuestion",targets:[],dragabbleElements:{},constructor:function(t,e,i){this.targets=[],this.dragabbleElements={},this.constructor(t,e,i)},getId:function(){return"hidCorrelation_"+this.questionId},getContainerId:function(){return"tblQueContainer_"+this.questionId},idToCtrlId:function(t){return"id"+this.questionId+"-"+t.replace(/\./g,"_")},ctrlIdToId:function(t){return t.replace(/^.*-/,"").replace(/\_/,".")},draw:function(s,n){n=n||!1;var a=this.getId(),r=t.get(s),o='<table id="'+this.getContainerId()+'" class="aq-ddcorrelation">',l='<tr>\t\t\t\t\t\t<td class="aq-ddcorrelation-label-cell">\t\t\t\t\t\t\t<div id="#{ctrlLabelId}" class="'+this.TARGET_CLASS+'">\t\t\t\t\t\t\t\t<div class="aq-ddcorrelation-label">#{label}</div>\t\t\t\t\t\t\t\t<div class="'+this.HANDLER_TARGET_CLASS+'"></div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</td>\t\t\t\t\t\t<td>\t\t\t\t\t\t\t<div class="aq-ddcorrelation-answerholder-out">\t\t\t\t\t\t\t\t<div class="'+this.PH_TARGET_CLASS+'">\t\t\t\t\t\t\t\t\t<div id="#{ctrlAnswerId}" class="'+this.HANDLER_CLASS+' aq-ddcorrelation-answer">\t\t\t\t\t\t\t\t\t\t<div>#{answer}</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</td>\t\t\t\t\t</tr>';if(this.questionData)for(var u=0,d=this.questionData.answers.length;u<d;u++){var h=this.questionData.answers[u],c=this.questionData.labels[u];o+=YAHOO.ARISoft.core.format(l,{ctrlLabelId:this.idToCtrlId(c.id),ctrlAnswerId:this.idToCtrlId(h.id),answerId:h.id,answer:h.answer,labelId:c.id,label:c.label})}o+='</table><input type="hidden" id="'+a+'" name="'+a+'" value="" />',r.innerHTML=o,e.onAvailable(s,(function(){if(this._createDragDrop(s,this.questionData),this.questionData&&this.questionData.correlations){var t=this.questionData.correlations;for(var e in t){var a=t[e];if(a){var r=this.idToCtrlId(a);if(!i.isUndefined(this.dragabbleElements[r])){var o=this.idToCtrlId(e);this.dragabbleElements[r].onDragDrop(null,o)}}}this.collectData()}if(n)for(var l in this.dragabbleElements)this.dragabbleElements[l].lock()}),this,!0)},_createDragDrop:function(e,i){i&&(this.targets=[],t.getElementsByClassName(this.PH_TARGET_CLASS,null,e,(function(t){new YAHOO.util.DDTarget(t,this.DD_GROUP)}),this,!0),t.getElementsByClassName(this.TARGET_CLASS,null,e,(function(t){this.targets.push(new YAHOO.util.DDTarget(t,this.DD_GROUP))}),this,!0),t.getElementsByClassName(this.HANDLER_CLASS,null,e,(function(t){var e=new a.questions.util.DDQuizCorrelation(t,this.DD_GROUP,{}),i=t.id;e.on("endDragEvent",(function(){this.collectData()}),null,this),this.dragabbleElements[i]=e}),this,!0))},collectData:function(){for(var e=[],s=this.targets||[],n=0,a=s.length;n<a;n++){var r=s[n];if(r.player){var o=r.getEl(),l=r.player.getEl(),u=this.ctrlIdToId(o.id),d=this.ctrlIdToId(l.id);e.push({labelId:u,answerId:d})}}return t.get(this.getId()).value=i.JSON.stringify(e),e},validate:function(t){t=t||!1;var e=!0,i=this.collectData(),s=this.targets||[];return i.length<s.length&&(e=!t&&null),e},setReadOnly:function(t){for(var e in this._readOnly=t,this.dragabbleElements)t?this.dragabbleElements[e].lock():this.dragabbleElements[e].unlock()}}),YAHOO.namespace("ARISoft.ariQuiz.questions.util"),a.questions.util={DDQuizCorrelation:function(t,e,i){a.questions.util.DDQuizCorrelation.superclass.constructor.apply(this,arguments),this.initCtrl(t,e,i)},getAnswerNumber:function(t,e){var i;switch(e){case"AlphaUpper":i=String.fromCharCode(64+t);break;case"AlphaLower":i=String.fromCharCode(96+t);break;default:i=t}return i}},YAHOO.extend(YAHOO.ARISoft.ariQuiz.questions.util.DDQuizCorrelation,YAHOO.util.DDProxy,{TYPE:"DDQuizCorrelation",ACTIVE_PH_CLASS:"aq-ddcorrelation-answeronlabel",initCtrl:function(e,i,s){if(e){var n=this.getDragEl();t.setStyle(n,"borderColor","transparent"),t.setStyle(n,"opacity",.76),this.isTarget=!1,this.originalStyles=[],this.type=a.questions.util.DDQuizCorrelation.TYPE,this.slot=null,this.startPos=t.getXY(this.getEl())}},startDrag:function(e,i){var s=this.getDragEl(),n=this.getEl();this.isInPlace=YAHOO.util.Dom.hasClass(n,this.ACTIVE_PH_CLASS),this.removeActivePhClass(n),s.innerHTML=n.innerHTML,s.className=n.className,t.setStyle(s,"color",t.getStyle(n,"color")),t.setStyle(s,"backgroundColor",t.getStyle(n,"backgroundColor")),t.setStyle(n,"opacity",.1)},endDrag:function(e){t.setStyle(this.getEl(),"opacity",1),!this.isDragDrop&&this.isInPlace&&this.addActivePhClass(this.getEl()),this.isDragDrop=!1,this.isInPlace=null},onDragDrop:function(e,i){var s;this.isDragDrop=!0,s="string"==typeof i?YAHOO.util.DDM.getDDById(i):YAHOO.util.DDM.getBestMatch(i);var n=this.getEl();if(s.player)if(this.slot){if(YAHOO.util.DDM.isLegalTarget(s.player,this.slot)){var a=(o=s.player.getEl()).parentNode,r=n.parentNode;n.parentNode.removeChild(n),a.appendChild(n),o.parentNode.removeChild(o),r.appendChild(o),this.slot.player=s.player,s.player.slot=this.slot}else t.setXY(s.player.getEl(),s.player.startPos),this.slot.player=null,s.player.slot=null;this.isInPlace?this.addActivePhClass(s.player.getEl()):this.removeActivePhClass(s.player.getEl())}else{s.player.slot=null;var o;a=(o=s.player.getEl()).parentNode;o.parentNode.removeChild(o),n.parentNode.appendChild(o),a.appendChild(n)}else this.slot&&(this.slot.player=null);var l=t.getElementsByClassName("aq-ddcorrelation-label-answerholder",null,s.getEl());l&&l.length>0?(this.addActivePhClass(n),n.parentNode.removeChild(n),l[0].appendChild(n)):(n.parentNode.removeChild(n),s.getEl().appendChild(n)),this.slot=s,this.slot.player=this},addActivePhClass:function(e){t.addClass(e,this.ACTIVE_PH_CLASS)},removeActivePhClass:function(e){t.removeClass(e,this.ACTIVE_PH_CLASS)},swap:function(e,i){var s=t.getXY(e),n=t.getXY(i);t.setXY(e,n),t.setXY(i,s)},onDragOver:function(t,e){},onDrag:function(t,e){}}),a.questions.EssayQuestion=n.core.createDerivedClass(a.questions.baseQuestion,{draw:function(i,s){var n=t.get(i),a="answer_"+this.questionId,r=this.questionData?this.questionData.answer:"";n.innerHTML='<textarea id="'+a+'" name="answer_'+this.questionId+'" class="aq-essay"'+(s?' disabled="disabled"':"")+"></textarea>",r&&e.onAvailable(a,(function(){this.value=r}))},validate:function(e){e=e||!1;var s=!0;return i.trim(t.get("answer_"+this.questionId).value)||(s=!1),s||(s=null),s},setReadOnly:function(e){this._readOnly=e;var i="answer_"+this.questionId;t.get(i).disabled=e}}),a.questions.MultipleDropdownQuestion=n.core.createDerivedClass(YAHOO.ARISoft.ariQuiz.questions.baseQuestion,{getContainerId:function(){return"questionContainer_"+this.questionId},draw:function(t,e,i){if(YAHOO.ARISoft.DOM.$(t).innerHTML="",this.questionData){var s=i.questionText;for(var n in this.questionData){var a=this.questionData[n],r=a.placeHolder,l=a.options||null;if(l&&0!=l.length){var u='<select id="tbxAnswer_'+this.questionId+"_"+n+'" name="tbxAnswer_'+this.questionId+"["+n+']" class="aq-multipledropdownquestion-ctrl" autocomplete="off"'+(e?' disabled="disabled"':"")+">";u+='<option value="">'+o.getMessage("COM_ARIQUIZ_SELECTANSWER")+"</option>";for(var d=a.answer||"",h=0;h<l.length;h++){var c=l[h];isSelected=c.hidQueId==d,u+='<option value="'+c.hidQueId+'"'+(isSelected?' selected="selected"':"")+">"+c.tbxAnswer+"</option>"}u+="</select>",s=s.replace("["+r+"]",u)}}i.questionText=s}},validate:function(e){e=e||!1;var i=!0;return t.getElementsByClassName("aq-multipledropdownquestion-ctrl",null,"ariQueMainContainer_"+this.questionId,(function(t){t.value||(i=!1)})),i||e||(i=null),i},setReadOnly:function(e){this._readOnly=e,t.getElementsByClassName("aq-multipledropdownquestion-ctrl",null,"ariQueMainContainer_"+this.questionId,(function(t){t.disabled=e}))}}),a.questions.MultipleFreeTextQuestion=n.core.createDerivedClass(YAHOO.ARISoft.ariQuiz.questions.baseQuestion,{getContainerId:function(){return"questionContainer_"+this.questionId},draw:function(t,i,s){if(YAHOO.ARISoft.DOM.$(t).innerHTML="",this.questionData){var n=s.questionText;for(var a in this.questionData){var r=this.questionData[a],l=r.placeHolder,u=r.options||null;if(u&&0!=u.length){var d='<input type="text" placeholder="'+o.getMessage("COM_ARIQUIZ_TYPEANSWER")+'" id="tbxAnswer_'+this.questionId+"_"+a+'" name="tbxAnswer_'+this.questionId+"["+a+']" class="aq-freetextquestion-ctrl" autocomplete="off"'+(i?' disabled="disabled"':"")+" />",h=r.answer||"";h&&e.onAvailable("tbxAnswer_"+this.questionId+"_"+a,(function(t){this.value=t.value}),{value:h}),n=n.replace("["+l+"]",d)}}s.questionText=n}},validate:function(e){e=e||!1;var i=!0;return t.getElementsByClassName("aq-freetextquestion-ctrl",null,"ariQueMainContainer_"+this.questionId,(function(t){val=t.value,val=val.replace(/^\s+|\s+$/g,""),i&&(i=!!val)})),i||e||(i=null),i},setReadOnly:function(e){this._readOnly=e,t.getElementsByClassName("aq-freetextquestion-ctrl",null,"ariQueMainContainer_"+this.questionId,(function(t){t.disabled=e}))}})}();