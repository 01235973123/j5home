!function(o,d){d(o).ready(function(){d("#adminForm").validationEngine("attach",{onValidationComplete:function(t,a){return!0===a&&(t.on("submit",function(t){t.preventDefault()}),t.find("#btn-submit").prop("disabled",!0),paymentMethodCallbackHandle())}}),buildStateFields("state","country",Joomla.getOptions("selectedState"));for(var t=Joomla.getOptions("numberMembers"),a=1;a<=t;a++)buildStateFields("state_"+a,"country_"+a,"");createStripeCardElement(),Joomla.getOptions("squareAppId")&&createSquareCardElement();var e=d("#email");if(e.val()&&e.validationEngine("validate"),Joomla.getOptions("isCountryBaseTax")&&d("#country").change(calculateCartRegistrationFee),Joomla.getOptions("isEUTaxRuleEnabled")){var n=Joomla.getOptions("euVatNumberField"),i=d("#"+n);i.after('<span class="invalid" id="vatnumber_validate_msg" style="display: none;">'+Joomla.JText._("EB_INVALID_VATNUMBER")+"</span></div>"),i.change(calculateCartRegistrationFee),Joomla.getOptions("showVatNumberField")?d("#field_"+n).show():d("#field_"+n).hide()}Joomla.getOptions("hidePaymentInformation")&&d(".payment_information").css("display","none"),EBMaskInputs(o.getElementById("adminForm")),initializeTermsAndConditionsModal(),o.dispatchEvent(new CustomEvent("onEBAfterRegistrationFormLoaded",{detail:{registrationType:"cartRegistration"}}))}),updateCart=function(){location.href=Joomla.getOptions("cartUrl")},calculateCartRegistrationFee=function(){var a=d("#btn-submit"),e=d("#ajax-loading-animation"),n=d("#total_amount"),i=d("#amount");a.attr("disabled","disabled"),e.show();var o=Joomla.getOptions("euVatNumberField"),t='select.ticket_type_quantity, #adminForm input[name="coupon_code"], #adminForm .payment-calculation input[type="text"], #adminForm .payment-calculation input[type="number"], #adminForm .payment-calculation input[type="checkbox"]:checked, #adminForm .payment-calculation input[type="radio"]:checked, #adminForm .payment-calculation select, #adminForm input.eb-hidden-field:hidden, #adminForm select[name="country"], #adminForm select[name="state"]';o&&(t=t+', #adminForm input[name="'+o+'"]'),d("input:radio[name^=payment_method]").length?t+=", input:radio[name^=payment_method]:checked":t+=", input[name^=payment_method]";var m=Joomla.getOptions("calculateCartRegistrationFeeUrl");d.ajax({type:"POST",url:m,data:d(t),dataType:"json",success:function(t){a.removeAttr("disabled"),e.hide(),n.val(t.total_amount),d("#discount_amount").val(t.discount_amount),d("#tax_amount").val(t.tax_amount),d("#payment_processing_fee").val(t.payment_processing_fee),i.val(t.amount),d("#deposit_amount").val(t.deposit_amount),(i.length||n.length)&&0==t.payment_amount?d(".payment_information").css("display","none"):(d(".payment_information:not(.eb-credit-card-input)").css("display",""),updatePaymentMethod()),1==t.coupon_valid?d("#coupon_validate_msg").hide():(a.attr("disabled","disabled"),d("#coupon_validate_msg").show()),o&&(1==t.show_vat_number_field?d("#field_"+o).show():d("#field_"+o).hide(),1==t.vat_number_valid?d("#vatnumber_validate_msg").hide():d("#vatnumber_validate_msg").show())},error:function(t,a){alert(a)}})}}(document,Eb.jQuery);