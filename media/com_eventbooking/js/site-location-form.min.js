!function(a,s){var i,d,l;Joomla.submitbutton=function(e){var o=a.adminForm;if("cancel"===e)Joomla.submitform(e);else{if(""===o.name.value)return alert(Joomla.JText._("EB_ENTER_LOCATION")),void o.name.focus();Joomla.submitform(e)}},google.maps.event.addDomListener(window,"load",function(){var e=Joomla.getOptions("coordinates"),o=a.getElementById("map-canvas"),t=Joomla.getOptions("zoomLevel",14);d=new google.maps.Geocoder,i=new google.maps.Map(o,{center:new google.maps.LatLng(e[0],e[1]),zoom:t,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1}),l=new google.maps.Marker({map:i,position:new google.maps.LatLng(e[0],e[1]),draggable:!0}),google.maps.event.addListener(l,"drag",function(){d.geocode({latLng:l.getPosition()},function(e,o){o==google.maps.GeocoderStatus.OK&&e[0]&&(a.getElementById("address").value=e[0].formatted_address,a.getElementById("coordinates").value=l.getPosition().toUrlValue())})})}),s(a).ready(function(){var e=s("#address");e.on("keyup",function(){var e=s(this).val(),n=s("#eventmaps_results"),o=s("#address").width();n.width("width",o-21),n.hide(),n.empty(),""!==e&&d.geocode({address:e},function(e,o){"OK"===o&&(s(e).each(function(e,a){var o=s("<li>"),t=s("<a />",{href:"javascript:void(0)",text:a.formatted_address});t.click(function(){s("#address").val(a.formatted_address);var e=a.geometry.location.lat().toFixed(7),o=a.geometry.location.lng().toFixed(7),t=new google.maps.LatLng(e,o);s("#coordinates").val(e+","+o),l.setPosition(t),i.setCenter(t),n.hide()}),n.append(o.append(t))}),n.show())})}),e.on("blur",function(){setTimeout(function(){s("#eventmaps_results").hide()},1e4)}),s("#btn-get-location-from-address").on("click",function(){var e=a.getElementById("address").value;d.geocode({address:e},function(e,o){if(o==google.maps.GeocoderStatus.OK){var t=e[0].geometry.location;i.setCenter(t),l.setPosition(t),s("#coordinates").val(t.lat().toFixed(7)+","+t.lng().toFixed(7))}else alert("We're sorry but your location was not found.")})}),s("#btn-save-location").on("click",function(){Joomla.submitbutton("save")}),s("#btn-cancel").on("click",function(){Joomla.submitbutton("cancel")}),s("#btn-delete-location").on("click",function(){confirm(Joomla.JText._("EB_DELETE_LOCATION_CONFIRM"))&&Joomla.submitform("delete")})})}(document,jQuery);