!function(o,i){i(o).ready(function(){if(i("#adminForm").validationEngine("attach",{onValidationComplete:function(e,t){if(!0!==t)return!1;var a;if(e.on("submit",function(e){e.preventDefault()}),e.find("#btn-submit").prop("disabled",!0),0===(a=i("input:radio[name^=payment_method]").length?i("input:radio[name^=payment_method]:checked").val():i("input[name^=payment_method]").val()).indexOf("os_stripe")){if("undefined"!=typeof stripePublicKey)return Stripe.card.createToken({number:i("#x_card_num").val(),cvc:i("#x_card_code").val(),exp_month:i("select[name^=exp_month]").val(),exp_year:i("select[name^=exp_year]").val(),name:i("#card_holder_name").val()},stripeResponseHandler),!1;if("undefined"!=typeof stripe)return stripe.createToken(n).then(function(e){e.error?(alert(e.error.message),i("#btn-submit").prop("disabled",!1)):stripeTokenHandler(e.token)}),!1}return 0!==a.indexOf("os_squarecard")||!i("#square-card-form").is(":visible")||(squareCardCallBackHandle(),!1)}}),buildStateFields("state","country",Joomla.getOptions("selectedState")),"undefined"!=typeof stripe){var n=elements.create("card",{style:{base:{fontSize:"16px",color:"#32325d"}}});n.mount("#stripe-card-element")}Joomla.getOptions("squareAppId")&&createSquareCardElement()}),calculateRegistrationFee=function(){if(updatePaymentMethod(),1==o.adminForm.show_payment_fee.value){var e,t=i("#registrant_id").val(),a=i("#btn-submit"),n=i("#ajax-loading-animation");a.attr("disabled","disabled"),n.show(),e=i("input:radio[name^=payment_method]").length?i("input:radio[name^=payment_method]:checked").val():i("input[name^=payment_method]").val(),i.ajax({type:"GET",url:siteUrl+"index.php?option=com_eventbooking&task=register.calculate_registration_fee&payment_method="+e+"&registrant_id="+t,dataType:"json",success:function(e){a.removeAttr("disabled"),n.hide(),i("#amount").length&&i("#total_amount").val(e.amount),i("#payment_processing_fee").val(e.payment_processing_fee),i("#gross_amount").val(e.gross_amount)},error:function(e,t){alert(t)}})}},calculateRemainderFee=function(){if(updatePaymentMethod(),1==o.adminForm.show_payment_fee.value){var e,t=i("#registrant_id").val(),a=i("#btn-submit"),n=i("#ajax-loading-animation");a.attr("disabled","disabled"),n.show(),e=i("input:radio[name^=payment_method]").length?i("input:radio[name^=payment_method]:checked").val():i("input[name^=payment_method]").val(),i.ajax({type:"GET",url:siteUrl+"index.php?option=com_eventbooking&task=register.calculate_remainder_fee&payment_method="+e+"&registrant_id="+t,dataType:"json",success:function(e){a.removeAttr("disabled"),n.hide(),i("#amount").length&&i("#total_amount").val(e.amount),i("#payment_processing_fee").val(e.payment_processing_fee),i("#gross_amount").val(e.gross_amount)},error:function(e,t){alert(t)}})}}}(document,Eb.jQuery);