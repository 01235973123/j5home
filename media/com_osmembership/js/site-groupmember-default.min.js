!function(t,n){Joomla.submitbutton=function(e){var a=t.adminForm;"cancel"===e&&n("#adminForm").validationEngine("detach"),Joomla.submitform(e,a)},showHideUserAccountFields=function(){var e=n('input:radio[name="user_type"]:checked').val();"0"===e?(n(".new-user").show(),n(".existing-user").hide(),n("#email").attr("class",'class="validate[required,custom[email],ajax[ajaxValidateGroupMemberEmail]]"').removeAttr("readonly")):"1"===e&&(n(".new-user").hide(),n(".existing-user").show(),n("#email").removeAttr("class").attr("readonly","readonly"))},populateExistingUserData=function(){var e=n("#existing_user_username").val(),a=n("#plan_id").val(),t=Joomla.getOptions("siteUrl");n.ajax({type:"POST",url:t+"/index.php?option=com_osmembership&task=groupmember.get_existing_user_data&username="+encodeURIComponent(e)+"&plan_id="+a,dataType:"json",success:function(e){var a=[];for(var t in e)value=e[t],n("input[name='"+t+"[]']").length?(n.isArray(value)?a=value:a.push(value),n("input[name='"+t+"[]']").val(a)):n("input[type='radio'][name='"+t+"']").length?n("input[name="+t+"][value="+value+"]").attr("checked","checked"):n("#"+t).val(value)}})},n(t).ready(function(){OSMVALIDATEFORM("#adminForm"),buildStateFields("state","country",Joomla.getOptions("selectedState")),showHideUserAccountFields(),n("input:radio[name^=user_type]").click(showHideUserAccountFields),n("#existing_user_username").change(populateExistingUserData)})}(document,jQuery);