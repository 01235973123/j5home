!function(p,u){u(p).ready(function(){u.colorbox&&"undefined"==typeof tingle&&u(".osm-modal").colorbox({width:"80%",height:"80%",iframe:!0,scrolling:!0,rel:!1}),buildStateFields("state","country",Joomla.getOptions("selectedState")),OSMMaskInputs(p.getElementById("os_form")),!0===Joomla.getOptions("hidePaymentInformation")&&u(".payment_information").css("display","none");var e=Joomla.getOptions("vatNumberField");if(e){var t=Joomla.getOptions("inputPrependClass"),n=Joomla.getOptions("addOnClass"),a=Joomla.getOptions("countryCode"),o=Joomla.getOptions("showVatNumberField"),i=u("#"+e);i.addClass("taxable");var r=i.parent().html();r='<div class="'+t+' inline-display"><span class="'+n+'" id="vat_country_code">'+a+"</span>"+r+'<span class="invalid" id="vatnumber_validate_msg" style="display: none;"> '+Joomla.JText._("OSM_INVALID_VATNUMBER")+"</span></div>",i.parent().html(r),u("#"+e).change(function(){calculateSubscriptionFee()}),0===o?u("#field_"+e).hide():u("#field_"+e).show()}var l=Joomla.getOptions("paymentNeeded");if(Joomla.getOptions("hasStripePaymentMethod")&&"undefined"!=typeof stripe){var s=elements.create("card",{style:{base:{fontSize:"16px",color:"#32325d"}}});s.mount("#stripe-card-element")}Joomla.getOptions("squareAppId")&&createSquareCardElement();var d=Joomla.getOptions("maxErrorsPerField");u("#os_form").validationEngine("attach",{maxErrorsPerField:d,onValidationComplete:function(t,e){if(!0!==e)return!1;var n;if(t.on("submit",function(e){e.preventDefault()}),t.find("#btn-submit").prop("disabled",!0),l){if(void 0===(n=u('input:radio[name="payment_method"]').length?u('input:radio[name="payment_method"]:checked').val():u('input[name="payment_method"]').val()))return!0;if(!p.dispatchEvent(new CustomEvent("OSMPaymentCallbackHandle",{detail:{paymentMethod:n}})))return!1;if("undefined"!=typeof stripePublicKey&&0===n.indexOf("os_stripe")&&u("#tr_card_number").is(":visible"))return Stripe.card.createToken({number:u('input[name="x_card_num"]').val(),cvc:u('input[name="x_card_code"]').val(),exp_month:u('select[name="exp_month"]').val(),exp_year:u('select[name="exp_year"]').val(),name:u('input[name="card_holder_name"]').val()},stripeResponseHandler),!1;if("undefined"!=typeof stripe&&0===n.indexOf("os_stripe")&&u("#stripe-card-form").is(":visible"))return stripe.createToken(s).then(function(e){e.error?(alert(e.error.message),t.find("#btn-submit").removeAttr("disabled")):stripeTokenHandler(e.token)}),!1;if(0===n.indexOf("os_squarecard")&&u("#square-card-form").is(":visible"))return squareCardCallBackHandle(),!1}return!0}});var m=p.getElementById("btnLoginButton");m&&m.addEventListener("click",function(){var e=p.getElementById("login_username"),t=p.getElementById("login_password");return""===e.value?(alert(Joomla.JText._("OSM_ENTER_USERNAME_TO_LOGIN")),void e.focus()):""===t.value?(alert(Joomla.JText._("OSM_ENTER_PASSWORD_TO_LOGIN")),void e.focus()):(p.getElementById("username").value=e.value,p.getElementById("password").value=t.value,void p.getElementById("osm_login_form").submit())}),p.dispatchEvent(new CustomEvent("OSMSubscriptionFormLoaded"))})}(document,jQuery);