!function(i,o){o(i).ready(function(){buildStateFields("state","country",Joomla.getOptions("selectedState"));var a=Joomla.getOptions("paymentNeeded");if(Joomla.getOptions("hasStripePaymentMethod")&&"undefined"!=typeof stripe){var r=elements.create("card",{style:{base:{fontSize:"16px",color:"#32325d"}}});r.mount("#stripe-card-element")}Joomla.getOptions("squareAppId")&&createSquareCardElement(),o("#os_form").validationEngine("attach",{onValidationComplete:function(t,e){if(!0!==e)return!1;if(t.on("submit",function(e){e.preventDefault()}),t.find("#btn-submit").prop("disabled",!0),a){var n;if(n=o('input:radio[name="payment_method"]').length?o('input:radio[name="payment_method"]:checked').val():o('input[name="payment_method"]').val(),!i.dispatchEvent(new CustomEvent("OSMPaymentCallbackHandle",{detail:{paymentMethod:n}})))return!1;if("undefined"!=typeof stripePublicKey&&0===n.indexOf("os_stripe")&&o("#tr_card_number").is(":visible"))return Stripe.card.createToken({number:o('input[name="x_card_num"]').val(),cvc:o('input[name="x_card_code"]').val(),exp_month:o('select[name="exp_month"]').val(),exp_year:o('select[name="exp_year"]').val(),name:o('input[name="card_holder_name"]').val()},stripeResponseHandler),!1;if("undefined"!=typeof stripe&&0===n.indexOf("os_stripe")&&o("#stripe-card-form").is(":visible"))return stripe.createToken(r).then(function(e){e.error?(alert(e.error.message),t.find("#btn-submit").removeAttr("disabled")):stripeTokenHandler(e.token)}),!1;if(0===n.indexOf("os_squarecard"))return squareCardCallBackHandle(),!1}return!0}}),i.dispatchEvent(new CustomEvent("OSMSubscriptionFormLoaded"))})}(document,jQuery);